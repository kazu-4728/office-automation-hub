# ✅ タスクチェックリスト：EZ Manual Simplifier

**プロジェクト名**: EZ Manual Simplifier  
**作成日**: 2025-10-04  
**バージョン**: 1.0  
**参照**: `requirements.md`, `design-flow.md`

---

## 📊 進捗サマリー

```
フェーズ0（計画）    ██████████ 100% (3/3)
フェーズ1（基盤）    ░░░░░░░░░░   0% (0/8)
フェーズ2（統合）    ░░░░░░░░░░   0% (0/7)
フェーズ3（機能）    ░░░░░░░░░░   0% (0/12)
フェーズ4（最適化）  ░░░░░░░░░░   0% (0/6)
フェーズ5（デプロイ） ░░░░░░░░░░   0% (0/4)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
全体進捗             ███░░░░░░░  7.5% (3/40)
```

---

## 📅 フェーズ0：計画・設計（完了）

### ドキュメント作成
- [x] **0.1** 要件定義書作成（`requirements.md`）
- [x] **0.2** 設計フロー作成（`design-flow.md`）
- [x] **0.3** タスクチェックリスト作成（`task-checklist.md`）

**完了条件**: 
- ✅ 3つのドキュメントがすべて作成されている
- ✅ ユーザーの承認を得ている

---

## 📅 フェーズ1：プロジェクト基盤構築

**目標**: 開発環境とCI/CDパイプラインの構築  
**期間**: 1-2日  
**担当**: Claude → GitHub Copilot Agent

### 1.1 プロジェクト初期化
- [ ] **1.1.1** プロジェクトディレクトリ構造作成
  - [ ] `/frontend`、`/backend`、`/agents`、`/shared`、`/prompts`、`/tests`
  - [ ] `.github/workflows/`、`.mcp/`
- [ ] **1.1.2** `package.json` 作成・依存関係定義
  - [ ] フロントエンド依存関係（React、Vite、Tailwind）
  - [ ] バックエンド依存関係（Hono、Wrangler）
  - [ ] 開発ツール（TypeScript、ESLint、Prettier、Vitest）
- [ ] **1.1.3** TypeScript設定（`tsconfig.json`、`tsconfig.node.json`）
- [ ] **1.1.4** `.cursorrules` 作成（プロジェクト固有ルール）
- [ ] **1.1.5** `.env.example` 作成（環境変数テンプレート）

**完了条件**:
- ✅ `npm install` が成功する
- ✅ TypeScriptのビルドエラーなし

---

### 1.2 共通型定義
- [ ] **1.2.1** `shared/types/project.ts` 作成
- [ ] **1.2.2** `shared/types/document.ts` 作成
- [ ] **1.2.3** `shared/types/agent.ts` 作成
- [ ] **1.2.4** `shared/types/mcp.ts` 作成
- [ ] **1.2.5** `shared/types/index.ts` 作成（エクスポート）

**完了条件**:
- ✅ 全型定義がエラーなくコンパイルできる
- ✅ フロントエンド・バックエンドの両方からインポート可能

---

### 1.3 GitHub Actions基本設定
- [ ] **1.3.1** `.github/workflows/test.yml` 作成
  - [ ] ユニットテスト実行
  - [ ] リントチェック
  - [ ] 型チェック
- [ ] **1.3.2** `.github/workflows/deploy-frontend.yml` 作成
  - [ ] Cloudflare Pagesデプロイ
- [ ] **1.3.3** `.github/workflows/deploy-backend.yml` 作成
  - [ ] Cloudflare Workersデプロイ

**完了条件**:
- ✅ GitHub Actionsが正常に実行される
- ✅ テストがパスする

---

## 📅 フェーズ2：Cloudflare統合

**目標**: データ層とホスティングの構築  
**期間**: 1-2日  
**担当**: GitHub Copilot Agent → Gemini Pro

### 2.1 Cloudflare D1セットアップ
- [ ] **2.1.1** D1データベース作成（`wrangler d1 create`）
- [ ] **2.1.2** スキーマ定義（`.github/scripts/setup_database.sql`）
  - [ ] `projects` テーブル
  - [ ] `documents` テーブル
  - [ ] `versions` テーブル
  - [ ] `cache` テーブル
  - [ ] `analytics` テーブル
- [ ] **2.1.3** マイグレーション実行

**完了条件**:
- ✅ D1データベースが作成されている
- ✅ スキーマが正常に適用されている

---

### 2.2 Cloudflare R2セットアップ
- [ ] **2.2.1** R2バケット作成（`wrangler r2 bucket create`）
- [ ] **2.2.2** CORS設定
- [ ] **2.2.3** アップロード/ダウンロード関数実装

**完了条件**:
- ✅ R2バケットが作成されている
- ✅ ファイルアップロード/ダウンロードが動作する

---

### 2.3 Cloudflare Workers（バックエンド）
- [ ] **2.3.1** `backend/src/index.ts` 作成（Honoエントリポイント）
- [ ] **2.3.2** `backend/src/routes/projects.ts` 作成
  - [ ] GET `/api/projects` - プロジェクト一覧
  - [ ] POST `/api/projects` - プロジェクト作成
  - [ ] GET `/api/projects/:id` - プロジェクト詳細
- [ ] **2.3.3** `backend/src/routes/documents.ts` 作成
  - [ ] GET `/api/projects/:id/documents` - ドキュメント一覧
  - [ ] GET `/api/documents/:id` - ドキュメント詳細
- [ ] **2.3.4** `backend/src/db/client.ts` 作成（D1クライアント）
- [ ] **2.3.5** `backend/src/services/storage.ts` 作成（R2操作）

**完了条件**:
- ✅ `wrangler dev` でローカル動作確認
- ✅ 全APIエンドポイントが正常に動作

---

### 2.4 Cloudflare Pagesセットアップ
- [ ] **2.4.1** Cloudflare Pagesプロジェクト作成
- [ ] **2.4.2** GitHub連携設定
- [ ] **2.4.3** ビルド設定（Vite）
- [ ] **2.4.4** 環境変数設定

**完了条件**:
- ✅ フロントエンドがCloudflare Pagesにデプロイされる
- ✅ デプロイURLでアクセス可能

---

## 📅 フェーズ3：コア機能実装

**目標**: マニュアル変換機能の実装  
**期間**: 3-5日  
**担当**: GitHub Copilot Agent → Gemini Pro、各種MCP

### 3.1 フロントエンド基本UI
- [ ] **3.1.1** `frontend/src/pages/HomePage.tsx` 実装
  - [ ] 入力形式選択（URL/File/Video）
  - [ ] URL入力フォーム
  - [ ] ファイルアップロード（ドラッグ&ドロップ）
- [ ] **3.1.2** `frontend/src/pages/ConversionPage.tsx` 実装
  - [ ] 変換設定フォーム
  - [ ] 進行状況表示
- [ ] **3.1.3** `frontend/src/pages/ResultPage.tsx` 実装
  - [ ] 変換結果プレビュー
  - [ ] ダウンロードボタン
- [ ] **3.1.4** `frontend/src/components/` 共通コンポーネント
  - [ ] `Button`、`Input`、`Select`、`FileUpload`
  - [ ] `ProgressBar`、`Alert`、`Modal`

**完了条件**:
- ✅ UIが正常に表示される
- ✅ レスポンシブデザイン対応

---

### 3.2 Gemini Pro統合
- [ ] **3.2.1** `agents/gemini/client.ts` 作成（Gemini API クライアント）
- [ ] **3.2.2** `agents/gemini/content-converter.ts` 実装
  - [ ] コンテンツ解析関数
  - [ ] 平易化変換関数
  - [ ] チャンク処理対応
- [ ] **3.2.3** `agents/gemini/diagram-generator.ts` 実装
  - [ ] 図解プラン生成
  - [ ] Mermaidコード生成
- [ ] **3.2.4** `agents/gemini/image-generator.ts` 実装
  - [ ] Imagen API呼び出し
  - [ ] 画像最適化

**完了条件**:
- ✅ Gemini APIが正常に動作する
- ✅ コンテンツ変換が期待通りに動作する

---

### 3.3 MCP統合
- [ ] **3.3.1** `.mcp/config.json` 作成（MCP設定）
- [ ] **3.3.2** `agents/mcp/puppeteer-client.ts` 実装
  - [ ] URLスクレイピング
  - [ ] 動的サイト対応
- [ ] **3.3.3** `agents/mcp/pdf-client.ts` 実装
  - [ ] PDF解析
  - [ ] テキスト抽出
- [ ] **3.3.4** `agents/mcp/ocr-client.ts` 実装
  - [ ] 画像→テキスト変換

**完了条件**:
- ✅ 各MCPが正常に動作する
- ✅ GitHub Actions環境で実行可能

---

### 3.4 メインワークフロー実装
- [ ] **3.4.1** `.github/workflows/convert-manual.yml` 作成
  - [ ] Issueトリガー設定
  - [ ] MCP呼び出し
  - [ ] Gemini Pro処理
  - [ ] 結果保存（D1/R2）
- [ ] **3.4.2** `agents/orchestrator/task-distributor.ts` 実装
  - [ ] タスク分解ロジック
  - [ ] エージェント割り振り
  - [ ] 進行状況管理
- [ ] **3.4.3** エラーハンドリング・リトライ実装

**完了条件**:
- ✅ Issueからワークフロー起動が動作する
- ✅ エンドツーエンドで変換が完了する

---

### 3.5 プロンプト管理
- [ ] **3.5.1** `prompts/v1.0/` ディレクトリ作成
- [ ] **3.5.2** `simplify-content.txt` 作成
- [ ] **3.5.3** `generate-diagram.txt` 作成
- [ ] **3.5.4** `analyze-structure.txt` 作成
- [ ] **3.5.5** プロンプトバージョニング機能実装

**完了条件**:
- ✅ プロンプトがGit管理されている
- ✅ バージョン切り替えが可能

---

## 📅 フェーズ4：高度な機能・最適化

**目標**: 再現性、パフォーマンス、品質の向上  
**期間**: 2-3日  
**担当**: 全エージェント

### 4.1 再現性の確保
- [ ] **4.1.1** コンテンツハッシュ生成実装
- [ ] **4.1.2** キャッシング機能実装（R2 + D1）
- [ ] **4.1.3** バージョン管理機能実装
- [ ] **4.1.4** 監査証跡記録

**完了条件**:
- ✅ 同じ入力で同じ結果が得られる
- ✅ キャッシュヒット時に即座に結果が返る

---

### 4.2 並列処理・スケーラビリティ
- [ ] **4.2.1** チャンク分割ロジック実装
- [ ] **4.2.2** GitHub Actions並列実行設定
- [ ] **4.2.3** 結果統合ロジック実装

**完了条件**:
- ✅ 大規模コンテンツ（50ページ以上）が処理できる
- ✅ 並列処理で処理時間が短縮される

---

### 4.3 画像生成最適化
- [ ] **4.3.1** Mermaid CLI統合（`mermaid-cli`）
- [ ] **4.3.2** 画像圧縮実装（sharp、squoosh）
- [ ] **4.3.3** Gen Spark Pro統合（承認制）
  - [ ] 承認Issue自動作成
  - [ ] 承認フロー実装

**完了条件**:
- ✅ Mermaid図解が自動生成される
- ✅ 画像サイズが最適化されている
- ✅ Gen Spark承認フローが動作する

---

### 4.4 GitHub Copilot Agent統合
- [ ] **4.4.1** Copilot Agent設定（`.github/copilot-instructions.md`）
- [ ] **4.4.2** タスク分配ロジック実装
- [ ] **4.4.3** Issue自動作成機能
- [ ] **4.4.4** エージェント間通信実装

**完了条件**:
- ✅ Copilot Agentがタスクを正しく分配する
- ✅ Issueが自動作成される

---

### 4.5 エラー処理・ロギング
- [ ] **4.5.1** エラーハンドリング統一
- [ ] **4.5.2** ログ収集実装（D1 `logs` テーブル）
- [ ] **4.5.3** Cloudflare Analytics統合
- [ ] **4.5.4** アラート機能実装

**完了条件**:
- ✅ エラーが適切にログされる
- ✅ ダッシュボードでログ確認可能

---

### 4.6 テスト実装
- [ ] **4.6.1** ユニットテスト（Vitest）
  - [ ] `agents/gemini/*` のテスト
  - [ ] `backend/src/services/*` のテスト
- [ ] **4.6.2** 統合テスト
  - [ ] API エンドポイントのテスト
- [ ] **4.6.3** E2Eテスト（Playwright）
  - [ ] URL入力 → 変換 → 結果表示

**完了条件**:
- ✅ テストカバレッジ80%以上
- ✅ 全テストがパスする

---

## 📅 フェーズ5：本番デプロイ・ドキュメント

**目標**: 本番環境への展開と完全なドキュメント化  
**期間**: 1日  
**担当**: Claude、GitHub Copilot Agent

### 5.1 本番デプロイ
- [ ] **5.1.1** 本番環境変数設定（GitHub Secrets）
- [ ] **5.1.2** Cloudflare D1本番データベース作成
- [ ] **5.1.3** Cloudflare R2本番バケット作成
- [ ] **5.1.4** Cloudflare Pages本番デプロイ
- [ ] **5.1.5** カスタムドメイン設定（オプション）

**完了条件**:
- ✅ 本番環境が正常に動作する
- ✅ HTTPSでアクセス可能

---

### 5.2 ドキュメント整備
- [ ] **5.2.1** `README.md` 更新
  - [ ] プロジェクト概要
  - [ ] セットアップ手順
  - [ ] 使い方
- [ ] **5.2.2** `docs/api-reference.md` 作成
- [ ] **5.2.3** `docs/deployment-guide.md` 作成
- [ ] **5.2.4** Issueテンプレート作成
  - [ ] `.github/ISSUE_TEMPLATE/conversion-request.md`
  - [ ] `.github/ISSUE_TEMPLATE/genspark-approval.md`

**完了条件**:
- ✅ 全主要機能にドキュメントがある
- ✅ 新規ユーザーがセットアップできる

---

### 5.3 パフォーマンス最適化
- [ ] **5.3.1** Lighthouse監査実行
- [ ] **5.3.2** パフォーマンス改善（目標: 90+）
- [ ] **5.3.3** SEO最適化

**完了条件**:
- ✅ Lighthouse Performance 90+
- ✅ First Contentful Paint < 1.5秒

---

### 5.4 受入テスト
- [ ] **5.4.1** MVP受入基準チェック
  - [ ] URL入力 → HTML出力
  - [ ] Mermaid図解生成
  - [ ] Gemini Pro変換
  - [ ] Cloudflare Pagesデプロイ
  - [ ] GitHub Copilot Agent連携
  - [ ] 変換履歴保存
  - [ ] 再現性確認
- [ ] **5.4.2** 品質基準チェック
  - [ ] ビルドエラーなし
  - [ ] Lint警告なし
  - [ ] テストカバレッジ80%+
  - [ ] Lighthouse 90+

**完了条件**:
- ✅ 全受入基準を満たしている

---

## 🚀 フェーズ6：将来拡張（オプション）

**目標**: 高度な機能の追加  
**期間**: 継続的  
**優先度**: 低

### 6.1 多言語対応
- [ ] **6.1.1** i18n設定（react-i18next）
- [ ] **6.1.2** 英語翻訳
- [ ] **6.1.3** 中国語翻訳

### 6.2 コラボレーション機能
- [ ] **6.2.1** ユーザー認証（Cloudflare Access）
- [ ] **6.2.2** 共有機能
- [ ] **6.2.3** コメント機能

### 6.3 汎用Webサイトビルダー
- [ ] **6.3.1** テンプレートシステム
- [ ] **6.3.2** カスタマイズ機能
- [ ] **6.3.3** 自動デプロイ

### 6.4 自動バグ修正
- [ ] **6.4.1** エラー検出AI
- [ ] **6.4.2** 自動修正提案
- [ ] **6.4.3** テスト自動生成

---

## 📝 タスク管理ルール

### 優先度
- **P0**: 必須（MVP）
- **P1**: 重要（早期実装）
- **P2**: 推奨（将来実装）
- **P3**: オプション（余裕があれば）

### ステータス
- `[ ]` 未着手
- `[~]` 進行中
- `[x]` 完了
- `[!]` ブロック中
- `[-]` スキップ

### 担当者割り当て
- **Claude（Cursor）**: 計画、Issue作成、レビュー
- **GitHub Copilot Agent**: オーケストレーション、タスク分配
- **Gemini Pro**: コンテンツ処理、変換
- **GitHub Copilot**: コード生成
- **Gen Spark Pro**: デザイン（承認制）

---

## 🎯 マイルストーン

| マイルストーン | 期日目標 | 条件 |
|-------------|---------|------|
| **M0: 計画完了** | Day 0 | 要件定義・設計完了 |
| **M1: 基盤完了** | Day 2 | プロジェクト初期化・CI/CD構築 |
| **M2: データ層完了** | Day 4 | Cloudflare統合完了 |
| **M3: MVP完成** | Day 9 | コア機能動作 |
| **M4: 最適化完了** | Day 12 | パフォーマンス・品質向上 |
| **M5: 本番リリース** | Day 13 | 本番環境デプロイ |

---

## 📊 進捗追跡

### 毎日の進捗確認
- [ ] 完了したタスクを `[x]` にする
- [ ] ブロッカーを記録する
- [ ] 次の優先タスクを特定する

### ブロッカー記録

| 日付 | タスクID | ブロッカー内容 | 解決策 | ステータス |
|------|---------|-------------|--------|-----------|
| - | - | - | - | - |

### 変更履歴

| 日付 | 変更内容 | 理由 |
|------|---------|------|
| 2025-10-04 | 初版作成 | - |

---

## ✅ 次のアクション

1. **今すぐ**: ユーザーの承認を得る
2. **次**: フェーズ1開始（プロジェクト初期化）
3. **並行**: GitHub Copilot Agentへのタスク委任準備

---

**このタスクチェックリストに対するフィードバックをお願いします。**  
**優先順位の変更、タスクの追加・削除があればお知らせください。**  
**承認いただけたら、すぐにフェーズ1を開始します！** 🚀
