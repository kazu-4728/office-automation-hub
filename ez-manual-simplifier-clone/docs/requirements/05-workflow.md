# 作業フロー

## Chatベースのワークフロー

### 基本フロー
```
【あなた】
"このURLを変換して"
  ↓
【私（Claude）】
1. コスト見積もり提示
2. あなたの承認待ち
3. 実行
4. 結果報告
  ↓
【Codex】
レビュー（必要に応じて）
  ↓
【完了】
```

### 詳細フロー

#### Step 1: リクエスト受付
【あなた】
- URL指定
- オプション指定（レベル、詳細度など）

【私】
- URL解析
- ページ数・文字数推定
- コスト見積もり計算

#### Step 2: 承認フロー
【私】
```
┌─────────────────────────────┐
│ 💰 コスト見積もり            │
├─────────────────────────────┤
│ ページ数: 5                 │
│ 文字数: 25,000文字          │
│ コスト: $0.25               │
│ 時間: 3分                   │
│ 今月残り: $1.75             │
└─────────────────────────────┘

✅ 実行しますか？
```

【あなた】
- "OK" → 実行
- "高すぎる" → 調整提案
- "キャンセル" → 終了

#### Step 3: 実行
【私】
1. スクレイピング
2. 構造解析
3. テキスト変換
4. 図解生成
5. テンプレート適用
6. ファイル生成

#### Step 4: 結果報告
【私】
```
┌─────────────────────────────┐
│ ✅ 完了                     │
├─────────────────────────────┤
│ 出力先: output/react-learn/ │
│ ページ数: 5                 │
│ 実際コスト: $0.23           │
│ 時間: 2分45秒               │
└─────────────────────────────┘
```

## エージェント連携

### 私（Claude）の役割
- プロジェクト統括
- 設計・実装
- タスク管理
- 他のエージェントへの委任

### Codexの役割
- コードレビュー
- バグ検出
- ベストプラクティスチェック
- セキュリティレビュー

### Geminiの役割
- 大規模一括処理（補助）
- 画像生成（Imagen）
- 複雑な推論（必要時のみ）

## エラーハンドリング

### エラー発生時
1. エラー内容を詳細に報告
2. 影響範囲を特定
3. 代替手段を提案
4. 部分的な結果でも出力

### 復旧手順
1. エラー原因の特定
2. 該当モジュールの修正
3. テスト実行
4. 再実行

## 品質管理

### レビューポイント
- コード品質
- エラーハンドリング
- パフォーマンス
- セキュリティ

### テスト項目
- 単体テスト
- 統合テスト
- エンドツーエンドテスト
- コスト検証

## 引き継ぎ

### ドキュメント更新
- 設計変更時は即座に更新
- 他のAIが理解できる記述
- 具体例を豊富に含める

### 状態管理
- 現在の進捗状況
- 未完了タスク
- 次のステップ
- 注意事項